<!DOCTYPE html>
<html>
    <head>
        <title>ShoppingList</title>
            <link rel="stylesheet" 
            href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
    </head>
<body>
    
    <nav>
        <div class="nav-wrapper">
            <a class="brand-logo center">Pomodron</a>
        </div>

        
    </nav>
    <ul></ul>
    <h3 id="demo" class="center">25m : 00s</h3>
    <div class="center-align">
            <button type="button" onclick="StartTimer();" class="btn waves-effect waves-light">Start Working!</button>
    </div>
    
    <script>
        // pomodoro session time in minutes
        var pSessionTime = 25;

        function StartTimer(){
            // Set the date we're counting down to
            var countDownDate = new Date();
            countDownDate.setTime(countDownDate.getTime() + pSessionTime * 60 * 1000);
            var countDownTime = countDownDate.getTime();
            // Update the count down every 1 second
            var x = setInterval(function() {

            // Get todays date and time
            var now = new Date().getTime();

            // Find the distance between now an the count down date
            var distance = countDownTime - now;

            // Time calculations for days, hours, minutes and seconds
            var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            var seconds = Math.floor((distance % (1000 * 60)) / 1000);

            // Display the result in the element with id="demo"
            document.getElementById("demo").innerHTML = minutes + "m : " + seconds + "s ";

            // If the count down is finished, write some text 
            if (distance < 0) {
                clearInterval(x);
                document.getElementById("demo").innerHTML = "EXPIRED";
            }
            }, 1000);
        }

        // add item
        ipcRenderer.on('item:add', function(e, item){
            
            // const itemText = document.createTextNode(item);  
            // pSessionTime = parseInt(itemText);
            // console.log(pSessionTime);
        });

        // clear items
        ipcRenderer.on('item:clear', function(){
            ul.innerHTML = '';
            if(ul.children.length == 0) {
                ul.className = '';
            }
        });

        // remove item
        ul.addEventListener('dblclick', removeItem);

        function removeItem(e) {
            e.target.remove();
            if(ul.children.length == 0) {
                ul.className = '';
            }
        }

    </script>

</body>
</html>